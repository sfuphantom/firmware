
#include "BMS_Tester_Board_Thermistor_Firmware.h"



/***************************************************************************************************************************************************/
/*  TRANSFER GROUPS  */
/***************************************************************************************************************************************************/

#define TransferGroup0  0x0         //Size = 10 words

/***************************************************************************************************************************************************/
/*  SIMULATED DATA BUFFER  */
/***************************************************************************************************************************************************/

uint16 simulated_data_buffer[10] = {0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,};

/***************************************************************************************************************************************************/
/*  TRANSFER VARIABLES  */
/***************************************************************************************************************************************************/

uint8 mibspi_transfer_complete;

/***************************************************************************************************************************************************/
/*  SEND SIMULATED DATA USING mibSPI  */
/***************************************************************************************************************************************************/

void send_simulated_thermistor_data (uint8 test_data_format_type) //receive the test data format type from the python script using SCI
{                                                                   //and sends the simulated data to the BMS using mibSPI

    //Initialize modules----------------------------------------------------------------------------------------------------------------------------

    mibspiInit();
    gioInit();
    sciInit();

    //Initialize data transmission------------------------------------------------------------------------------------------------------------------

    mibspiSetData(mibspiREG3, TransferGroup0, simulated_data_buffer);
    mibspiEnableGroupNotification(mibspiREG3, TransferGroup0, 0);
    mibspi_transfer_complete = 0;
    mibspiTransfer(mibspiREG3, TransferGroup0);
    while(!mibspi_transfer_complete);

    //Send status report to python script-----------------------------------------------------------------------------------------------------------


}


/***************************************************************************************************************************************************/
/*  TRANSFER INTERRUPT HANDLER  */
/***************************************************************************************************************************************************/


//void mibspiGroupNotification(mibspiREG3, TransferGroup0)
//{
//    mibspiDisableGroupNotification(mibspiREG3, TransferGroup0);
//
//}
